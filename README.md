# –¢—ã –Ω–µ –æ–¥–∏–Ω (You're Not Alone)

Telegram-–±–æ—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–≤ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Å–∏—Ç—É–∞—Ü–∏—è–º —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π peer-to-peer –¥–∏–∞–ª–æ–≥–æ–≤.

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

–°–µ—Ä–≤–∏—Å –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è –æ–¥–∏–Ω-–Ω–∞-–æ–¥–∏–Ω —Å –ª—é–¥—å–º–∏, –ø–µ—Ä–µ–∂–∏–≤—à–∏–º–∏ –ø–æ—Ö–æ–∂–∏–π –æ–ø—ã—Ç. –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–π—Ç–∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –æ—Ç —Ç–µ—Ö, –∫—Ç–æ –ø–æ–Ω–∏–º–∞–µ—Ç –≤–∞—à—É —Å–∏—Ç—É–∞—Ü–∏—é.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç **–£–º–Ω—ã–π –º–∞—Ç—á–∏–Ω–≥** ‚Äî –ø–æ–¥–±–æ—Ä —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–≤ –ø–æ –æ–±—â–∏–º —Ç–µ–º–∞–º –∏ —á–∞—Å–æ–≤–æ–º—É –ø–æ—è—Å—É
- üé≠ **–ê–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å** ‚Äî –æ–±—â–µ–Ω–∏–µ –ø–æ–¥ –ø—Å–µ–≤–¥–æ–Ω–∏–º–æ–º –±–µ–∑ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ü§ñ **AI-–ø–æ–¥—Å–∫–∞–∑–∫–∏** ‚Äî –ø–æ–º–æ—â—å –≤ —ç–º–ø–∞—Ç–∏—á–Ω–æ–º –æ–±—â–µ–Ω–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚≠ê **–ß–∞–µ–≤—ã–µ** ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ —á–µ—Ä–µ–∑ Telegram Stars
- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∂–∞–ª–æ–±, –º–æ–¥–µ—Ä–∞—Ü–∏—è –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–º–æ—â—å

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Backend:** Python 3.12, FastAPI, aiogram 3.x
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL 18
- **–ö—ç—à/–û—á–µ—Ä–µ–¥—å:** Redis 7.4
- **ORM:** SQLAlchemy 2.x + Alembic
- **–ü–ª–∞—Ç–µ–∂–∏:** Telegram Stars (XTR)
- **AI:** OpenAI API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–î–µ–ø–ª–æ–π:** Docker, Docker Compose

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ api/              # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ bot/              # Telegram –±–æ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ ai_coach/         # AI —Å–µ—Ä–≤–∏—Å –ø–æ–¥—Å–∫–∞–∑–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ workers/          # –§–æ–Ω–æ–≤—ã–µ –≤–æ—Ä–∫–µ—Ä—ã
‚îú‚îÄ‚îÄ core/                 # –ë–∞–∑–æ–≤—ã–µ –º–æ–¥—É–ª–∏
‚îú‚îÄ‚îÄ models/               # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ migrations/           # Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ deploy/               # Docker —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ tests/                # –¢–µ—Å—Ç—ã
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- Python 3.12+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ –æ—Ç [@BotFather](https://t.me/BotFather)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone <repository-url>
   cd NotAlone
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   cp .env.example .env
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env`:**
   ```env
   TELEGRAM_BOT_TOKEN=your_bot_token_here
   PUBLIC_BASE_URL=https://your-domain.com
   SECRET_KEY=your_secret_key_here
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:**
   ```bash
   make up
   ```

5. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
   ```bash
   make migrate
   ```

## üìù –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
make help          # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
make up            # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make down          # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make logs          # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏
make migrate       # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
make migrate-create # –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
make fmt           # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
make lint          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ –ª–∏–Ω—Ç–µ—Ä–∞–º–∏
make test          # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–µ–∑ Docker

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   pip install -e ".[dev]"
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL –∏ Redis:**
   ```bash
   docker compose -f deploy/compose.yml up db redis -d
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ API:**
   ```bash
   make dev-api
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ):**
   ```bash
   make dev-bot
   ```

### –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
make migrate-create
# –í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ª–∏–Ω—Ç–∏–Ω–≥

```bash
make fmt   # –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
make lint  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏

- **User** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –∞–Ω–æ–Ω–∏–º–Ω—ã–º–∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏
- **Topic** ‚Äî —Ç–µ–º—ã –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è
- **Match** ‚Äî –º–∞—Ç—á–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **ChatSession** ‚Äî —Å–µ—Å—Å–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤
- **Tip** ‚Äî —á–∞–µ–≤—ã–µ —á–µ—Ä–µ–∑ Telegram Stars
- **AiHint** ‚Äî AI –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –æ–±—â–µ–Ω–∏—è

### –°—Ö–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π

–ú–∏–≥—Ä–∞—Ü–∏–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Alembic:
```bash
alembic upgrade head      # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
alembic downgrade -1      # –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
alembic history           # –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
```

## ü§ñ Telegram Bot

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- `/start` ‚Äî –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- `/profile` ‚Äî –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- `/find` ‚Äî –Ω–∞–π—Ç–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
- `/tips` ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å —á–∞–µ–≤—ã–µ
- `/help` ‚Äî –ø–æ–º–æ—â—å –∏ –ø—Ä–∞–≤–∏–ª–∞

### Webhooks

–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ webhooks. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- –£ –≤–∞—Å –µ—Å—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ–º–µ–Ω —Å HTTPS
- Webhook URL —É–∫–∞–∑–∞–Ω –≤ `PUBLIC_BASE_URL`

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å

- –ù–∏–∫–∞–∫–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è
- –û–±—â–µ–Ω–∏–µ –ø–æ–¥ –ø—Å–µ–≤–¥–æ–Ω–∏–º–∞–º–∏
- –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è PII –≤ –ª–æ–≥–∞—Ö

### –ú–æ–¥–µ—Ä–∞—Ü–∏—è

- –°–∏—Å—Ç–µ–º–∞ –∂–∞–ª–æ–± –∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- Safety —Ñ–ª–∞–≥–∏ –¥–ª—è —Ç–æ–∫—Å–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –°—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–º–æ—â—å

## üí≥ –ü–ª–∞—Ç–µ–∂–∏

–ü–ª–∞—Ç–µ–∂–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ **Telegram Stars (XTR)**:
- –¶–∏—Ñ—Ä–æ–≤—ã–µ —á–∞–µ–≤—ã–µ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —É—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π
- –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—á–µ—Ç–æ–≤

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
make test              # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
pytest tests/unit      # –¢–æ–ª—å–∫–æ unit-—Ç–µ—Å—Ç—ã
pytest tests/integration  # –¢–æ–ª—å–∫–æ integration-—Ç–µ—Å—Ç—ã
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Checks

- `GET /health` ‚Äî –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å
- `GET /health/db` ‚Äî —Å—Ç–∞—Ç—É—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `GET /health/redis` ‚Äî —Å—Ç–∞—Ç—É—Å Redis

### –õ–æ–≥–∏

```bash
make logs          # –í—Å–µ –ª–æ–≥–∏
make logs-api      # –õ–æ–≥–∏ API
make logs-bot      # –õ–æ–≥–∏ –±–æ—Ç–∞
make logs-worker   # –õ–æ–≥–∏ –≤–æ—Ä–∫–µ—Ä–∞
```

## üö¢ –î–µ–ø–ª–æ–π

### Production –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å managed PostgreSQL (Neon, Supabase)
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å managed Redis (Upstash, Redis Cloud)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS —Å –≤–∞–ª–∏–¥–Ω—ã–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus, Grafana)
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Loki, ELK)

### Docker –¥–µ–ø–ª–æ–π

```bash
docker compose -f deploy/compose.yml up -d --build
```

## üìã TODO

- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –º–∞—Ç—á–∏–Ω–≥–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram Stars –ø–ª–∞—Ç–µ–∂–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–¥–µ—Ä–∞—Ü–∏—é
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è —Ñ–∏—á–∏ (`git checkout -b feature/amazing-feature`)
3. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. –ó–∞–ø—É—à—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π: [sammuti.com](https://sammuti.com)

---

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –≠—Ç–æ –Ω–µ –∑–∞–º–µ–Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–æ–º–æ—â–∏. –ü—Ä–∏ —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º.
